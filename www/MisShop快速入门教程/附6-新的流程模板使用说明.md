MisShop从3.5.2版本之后，启用了新的流程设计模板。新模板下进行流程的设计总体顺序还是跟以前类似：
1.设计数据表
2.画流程逻辑图
3.配置阶段的属性
4.一键生成页面
下面对新模板的使用做详细介绍。

#####设计数据表
设计一个数据表用于存储这个审批单在流程获取中的各种信息，表名随意起。其中创建人字段（类型：引用 用户）、流程阶段字段（数据库字段名：mis_process_state，类型：短文本）是必须要有。后面会根据创建人的部门等信息判断由谁进行这个审批单下一步的审批，流程阶段字段用于记录该审批单当前所处的阶段。如下图 ![流程相关数据表的设计](https://upload-images.jianshu.io/upload_images/12920178-c5f99e97f472fa96.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

#####画流程图
数据表设计完以后，切换到**流程**工作区，点击工具条**添加流程**按钮，新建一个流程，新建时使用上一步设计的数据表。新建后，点击导航栏新建的流程名称，在右侧工作区点击**配置**，进入到浏览器画流程图。![](https://upload-images.jianshu.io/upload_images/12920178-50ecd599fd5f9a05.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
画流程图跟之前的流程图一样，使用**用户任务**工具和**转换**工具即可。注意有分支的时候要使用网关，排他网关是只走其中一条线路，后续不需要合并，并行网关是两条线路都必须通过才能通过，后续要有一个合并网关。如下图
![](https://upload-images.jianshu.io/upload_images/12920178-876396c82fec3d32.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
目前的简单逻辑，要有开始节点，结束节点有没有都可以。排他网关后的箭头要设置条件，如it.金额<3000 。设计完流程图后点击保存，就能在设计器中看到该流程的各个阶段。

#####配置各阶段属性
画完流程图点击保存后，能够在设计器流程的导航栏中看到流程的各个阶段。点击第一个阶段，有以下配置项：
- 字段名：可以不要
- 类型：可以不要
- 在**使用模板**一栏，点击选择，在弹出的下拉树中选择template>流程>发起，即把该阶段设置为发起模板。注意不要用template>审批，这是老版本流程的模板，不要混淆。
- 承办人表达式：表示这一步谁来处理，如写table.用户.find(table.角色.id==1)，it.创建人.部门.主管
- 承办人描述：还没经过的过程，给一个描述给他看，不给他看下一步审批人是谁。
- 跳过表达式：如写it.金额<10000、it.创建人^部门.名称=="xx"、it.类型==xx ，则满足这个条件时，这一步就会被跳过，直接进入下一步。流程图也可以设置条件跳过，但比较麻烦，图也很复杂。
- 字段：右边的字段名会在这个阶段的详情页中显示，可编辑表示这些字段在这个阶段的编辑页可以被编辑，列表中显示表示这些字段在这个阶段的列表页中显示。

设置完以后，同样设置第二个第三个阶段。要注意的是，所有的审批只共同生成一个页面，                                              出纳打款阶段是执行，每个执行的阶段都会生成一个页面。

#####一键生成页面
配置好以后，点击导航栏中的流程，再点击右侧的生成页面，就能一键生成流程的所有页面。目前执行阶段还要选择一下
